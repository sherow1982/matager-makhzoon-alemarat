<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅุชูุงู ุงูุทูุจ - ูุฎุฒูู ุงูุฅูุงุฑุงุช</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="main-header" style="text-align: center;">
        <div class="container">
            <a href="index.html" class="logo">
                <span class="uae-red">ูุฎุฒูู</span> <span class="uae-green">ุงูุฅูุงุฑุงุช</span>
            </a>
        </div>
    </header>

    <div class="container" style="margin-top: 40px; margin-bottom: 40px;">
        <div class="checkout-grid">
            
            <!-- ูููุฐุฌ ุงูุจูุงูุงุช -->
            <div class="checkout-form-section">
                <h2 class="section-title"><i class="fas fa-map-marker-alt"></i> ุนููุงู ุงูุดุญู</h2>
                <form id="checkout-form" onsubmit="processOrder(event)">
                    <div class="form-group">
                        <label>ุงูุงุณู ุงููุงูู</label>
                        <input type="text" id="c_name" required placeholder="ูุซุงู: ูุญูุฏ ุฃุญูุฏ">
                    </div>
                    <div class="form-group">
                        <label>ุฑูู ุงููุงุชู (ูุงุชุณุงุจ)</label>
                        <input type="tel" id="c_phone" required placeholder="050xxxxxxx">
                    </div>
                    <div class="form-group">
                        <label>ุงูุฅูุงุฑุฉ / ุงููุฏููุฉ</label>
                        <select id="c_city" required>
                            <option value="">ุงุฎุชุฑ ุงูุฅูุงุฑุฉ...</option>
                            <option value="ุฃุจูุธุจู">ุฃุจูุธุจู</option>
                            <option value="ุฏุจู">ุฏุจู</option>
                            <option value="ุงูุดุงุฑูุฉ">ุงูุดุงุฑูุฉ</option>
                            <option value="ุนุฌูุงู">ุนุฌูุงู</option>
                            <option value="ุฃู ุงูููููู">ุฃู ุงูููููู</option>
                            <option value="ุฑุฃุณ ุงูุฎููุฉ">ุฑุฃุณ ุงูุฎููุฉ</option>
                            <option value="ุงููุฌูุฑุฉ">ุงููุฌูุฑุฉ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ุงูุนููุงู ุงูุชูุตููู</label>
                        <input type="text" id="c_address" required placeholder="ุงูููุทูุฉุ ุงูุดุงุฑุนุ ุฑูู ุงููููุง/ุงูุดูุฉ">
                    </div>
                    
                    <button type="submit" class="btn-confirm-order">
                        <i class="fab fa-whatsapp"></i> ุชุฃููุฏ ุงูุทูุจ ุงูุขู
                    </button>
                    <p class="text-small" style="margin-top: 10px; color: #777;">ุณูุชู ุชุญูููู ููุงุชุณุงุจ ูุฅุฑุณุงู ุชูุงุตูู ุงูุทูุจ.</p>
                </form>
            </div>

            <!-- ููุฎุต ุงูุทูุจ -->
            <div class="order-summary-section">
                <h2 class="section-title"><i class="fas fa-shopping-cart"></i> ููุฎุต ุงูุทูุจ</h2>
                <div id="checkout-items">
                    <!-- ุณูุชู ุชุนุจุฆุชู ุจุงูุฌุงูุงุณูุฑุจุช -->
                </div>
                <div class="summary-total">
                    <div class="flex-between">
                        <span>ุงููุฌููุน ุงููุฑุนู:</span>
                        <span id="sub-total">0.00 ุฏุฑูู</span>
                    </div>
                    <div class="flex-between">
                        <span>ุงูุดุญู:</span>
                        <span style="color: var(--uae-green);">ูุฌุงูู (ุนุฑุถ ูุญุฏูุฏ)</span>
                    </div>
                    <div class="divider"></div>
                    <div class="flex-between total-row">
                        <span>ุงูุฅุฌูุงูู ุงูููู:</span>
                        <span id="final-total">0.00 ุฏุฑูู</span>
                    </div>
                    <div class="payment-method">
                        <i class="fas fa-money-bill-wave"></i> ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // ููุฏ ุฎุงุต ุจุตูุญุฉ ุงูุชุดูู ุฃูุช ููุท
        document.addEventListener('DOMContentLoaded', () => {
            loadCheckoutItems();
        });

        function loadCheckoutItems() {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            if(cart.length === 0) {
                window.location.href = 'index.html';
                return;
            }

            const container = document.getElementById('checkout-items');
            let total = 0;
            
            cart.forEach(item => {
                total += item.price * item.qty;
                container.innerHTML += `
                    <div class="summary-item">
                        <img src="${item.image}" alt="${item.title}">
                        <div>
                            <h4>${item.title}</h4>
                            <p>${item.qty} x ${item.price} ุฏุฑูู</p>
                        </div>
                        <div style="margin-right: auto;">${item.qty * item.price}</div>
                    </div>
                `;
            });

            document.getElementById('sub-total').innerText = total + ' ุฏุฑูู';
            document.getElementById('final-total').innerText = total + ' ุฏุฑูู';
        }

        function processOrder(e) {
            e.preventDefault();
            
            // ุฌูุน ุงูุจูุงูุงุช
            const name = document.getElementById('c_name').value;
            const phone = document.getElementById('c_phone').value;
            const city = document.getElementById('c_city').value;
            const address = document.getElementById('c_address').value;
            
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            // ุชุฌููุฒ ุฑุณุงูุฉ ุงููุงุชุณุงุจ
            let msg = `*ุทูุจ ุฌุฏูุฏ ูู ูุฎุฒูู ุงูุฅูุงุฑุงุช*%0a`;
            msg += `---------------------------%0a`;
            msg += `๐ค *ุงูุนููู:* ${name}%0a`;
            msg += `๐ฑ *ุงููุงุชู:* ${phone}%0a`;
            msg += `๐ *ุงูุนููุงู:* ${city} - ${address}%0a`;
            msg += `---------------------------%0a`;
            msg += `*ุงูุทูุจุงุช:*%0a`;
            
            let total = 0;
            cart.forEach(item => {
                msg += `โช๏ธ ${item.title} (x${item.qty}) - ${item.price * item.qty} ุฏุฑูู%0a`;
                total += item.price * item.qty;
            });
            
            msg += `---------------------------%0a`;
            msg += `๐ฐ *ุงูุฅุฌูุงูู ุงููุณุชุญู:* ${total} ุฏุฑูู%0a`;
            msg += `๐ฆ ุงูุฏูุน ุนูุฏ ุงูุงุณุชูุงู`;

            // ุชูุฑูุบ ุงูุณูุฉ
            localStorage.removeItem('cart');
            
            // ูุชุญ ูุงุชุณุงุจ
            window.open(`https://wa.me/201110760081?text=${msg}`, '_blank');
            
            // ุงูุชุญููู ูุตูุญุฉ ุงูุดูุฑ
            window.location.href = 'thankyou.html';
        }
    </script>
</body>
</html>
